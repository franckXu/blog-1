<!DOCTYPE html><!--[if lt IE 7]>      <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="Vlad's Tech Blog">
        <meta name="viewport" content="width=device-width">
        <title>Notes on Software Lifecycle &mdash; Blog</title>
            <link rel="stylesheet" href="../../../_static/normalize.css" type="text/css">
            <link rel="stylesheet" href="../../../_static/sphinx.css" type="text/css">
            <link rel="stylesheet" href="../../../_static/main.css" type="text/css">
            <link rel="stylesheet" href="../../../_static/flat.css" type="text/css">
            <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
            <link rel="stylesheet" href="../../../_static/font-awesome.min.css" type="text/css">
        <link rel="shortcut icon" href="../../../_static/tinkerer.ico" /><!-- Load modernizr and JQuery -->
        <script src="../../../_static/vendor/modernizr-2.6.2.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="../../../_static/vendor/jquery-1.8.2.min.js"><\/script>')</script>
        <script src="../../../_static/plugins.js"></script>
        <script src="../../../_static/main.js"></script>
        <link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Machine Learning on Azure - Part 3" href="../../09/24/machine-learning-on-azure-part-3.html" /><link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.html" /><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.7.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        SOURCELINK_SUFFIX: '.txt',
        HAS_SOURCE:  true
      };
    </script><script type="text/javascript" src="../../../_static/underscore.js"></script><script type="text/javascript" src="../../../_static/doctools.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/javascript" src="../../../_static/google_analytics.js"></script><link rel="stylesheet" href="../../../_static/extra.css" type="text/css" />
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script></head>
    <body role="document">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

      <div id="container"><div class="main-container" role="main"><div class="main wrapper body clearfix"><article><div class="timestamp postmeta">
            <span>November 27, 2021</span>
        </div>
    <div class="section" id="notes-on-software-lifecycle">
<h1>Notes on Software Lifecycle</h1>
<p>I spent a lot of time lately looking at how our team can improve our product’s
reliability and capability to respond to production incidents. This got me
thinking about the lifecycle of a contemporary software project. The model I’ve
been using for this looks like the following:</p>
<img alt="../../../_images/lifecycle.png" class="align-center" src="../../../_images/lifecycle.png" />
<p>At a high level, the cycle starts with <strong>engineers writing code</strong>. The code gets
merged and at some cadence, a new build is prepared for release. This usually
includes looking at a combination of testing and telemetry signals for engineers
to <strong>signoff on deploying the build</strong>. In case tests fail or telemetry shows
some anomalies, the deployment is abandoned. If all looks good, the <strong>build gets
deployed</strong>. Once the build is exposed to a larger audience, more <strong>telemetry
signals</strong> come in.</p>
<p>Most software these days uses some form of controlled exposure. For example,
services might be deployed first in a dev environment, then in a pre-production
environment, then to production in one region, then to all regions. Client
software is similarly deployed to different rings, for example new Office builds
get deployed first to the Office organization, then to all of Microsoft, then to
customers who opted into the Insider program, then to the whole world (I’m very
much oversimplifying things here, as release management for Office is way more
complex, but you get the idea). Telemetry signals from a ring feed back into the
<strong>build promotion</strong> process to give confidence that a build can be exposed to a
larger audience in the next ring.</p>
<p>Of course, sometimes things go wrong. We identify issues in the product, either
from <strong>telemetry signals</strong> or, worse, from <strong>user reports</strong>. These become <strong>live
site incidents</strong>. On-call engineers react to these and try to <strong>mitigate</strong> as
fast as possible. After the fire is put out, a good practice is to run a
<strong>postmortem</strong> to understand how the issue happened and see how it can be
prevented in the future. The learnings usually translate into <strong>repair items</strong>,
which get added to the engineering backlog.</p>
<p>We can split this lifecycle into two parts: a <em>proactive</em> part and a <em>reactive</em>
part, which roughly map to the top and bottom halves of the diagram.</p>
<div class="section" id="proactive">
<h2>Proactive</h2>
<p>The proactive part deals with <em>what we can do to prevent issues from making it
to production</em>.</p>
<img alt="../../../_images/proactive.png" class="align-center" src="../../../_images/proactive.png" />
<p>There are several things that could allow issues to slip through the cracks.</p>
<div class="section" id="code">
<h3>Code</h3>
<p>On the coding part, a feature might be missing tests to uncover regressions, it
might not be instrumented well enough to get good signals, or it might not be
put under a feature gate. Feature gates are service-controlled flags that can
be turned on/off to disable a feature. These are extremely valuable for quickly
mitigating production issues.</p>
<p>All of the above are addressed through education and engineering culture: more
junior engineers on the team might not even be aware of all the requirements a
feature should satisfy before it is “ready” (see my <a class="reference external" href="https://vladris.com/blog/2021/08/12/shipping-a-feature.html">Shipping a Feature</a>
post).</p>
<blockquote>
<div>A good practice is to have a <em>feature checklist</em>, a list of things engineers
need to consider before submitting a pull request. This includes things like
test coverage, telemetry, feature gates, performance, accessibility (for UI)
etc.</div></blockquote>
<p>Everyone writing code should know where this checklist is, and code reviewers
should keep it in mind while evaluating changes.</p>
</div>
<div class="section" id="signoff-for-build-promotion">
<h3>Signoff for Build Promotion</h3>
<p>Two main issues would allow a regression to get passed the build validation
process: either there is a gap in validation, or missed signals. This, of
course, assumes that the code has tests and is properly instrumented in the
coding stage. Here, the person or persons validating a build, either miss
running some validation (automatic or manual tests) or miss looking at a
telemetry signal that would tell them something is wrong.</p>
<p>Both of these issues can be addressed with automation.</p>
<blockquote>
<div>Have a <em>go/no-go dashboard</em> that aggregates all relevant signals (like test
run results, telemetry metrics).</div></blockquote>
<p>Of course, putting together such a dashboard and ensuring all code has the right
test automation and instrumentation is not easy.</p>
</div>
<div class="section" id="telemetry-signals">
<h3>Telemetry Signals</h3>
<p>Telemetry could have gaps: issues could manifest themselves without us
receiving a signal. If this happens, we need to learn from these incidents,
understand where the gaps are, and eliminate them. More about this on the
<em>reactive</em> part.</p>
</div>
</div>
<div class="section" id="reactive">
<h2>Reactive</h2>
<p>The reactive part deals with <em>how we can mitigate issues as quickly as possible
if they make it to production</em>.</p>
<img alt="../../../_images/reactive.png" class="align-center" src="../../../_images/reactive.png" />
<div class="section" id="incidents">
<h3>Incidents</h3>
<p>The entry point into the reactive cycle is an incident. An incident alerts the
on-call engineer and starts the mitigation process. The sooner an incident is
created, the sooner it can be addressed.</p>
<p>Issues here come from <em>alerting</em>. An alerting system runs automated queries
over incoming telemetry signals and looks for some anomalies or thresholds.
Things can go wrong in multiple ways:</p>
<ul>
<li><p class="first">We can collect a lot of telemetry but not have the right queries to notice
sudden spikes, or drops, or other anomalies in the telemetry stream.</p>
</li>
<li><p class="first">We could be overly cautious and generate too many alerts, most of them
false positives, which makes it hard for on-call to figure out when an alert
is real.</p>
</li>
<li><p class="first">Alerts might be very generic and not contain enough information for on-call
to easily mitigate.</p>
<blockquote>
<div><p>Alerts should be continuously finetuned to be accurate and actionable, with
as few false positives as possible.</p>
</div></blockquote>
</li>
</ul>
<p>Telemetry signals, even if correct, can be impacted by multiple things outside
of our control. For example, usage might raise or drop sharply during weekends
(depending on whether we’re talking about a game or a productivity app) or
holidays. This makes it even harder to develop accurate alerts.</p>
<p>The worst case is when issues get reported by customers before we see any
alerts: this signifies a big gap and a postmortem should identify the follow up
work (see <em>postmortems</em> below).</p>
</div>
<div class="section" id="mitigation">
<h3>Mitigation</h3>
<p>Several things can make mitigation harder. The on-call engineer might not know
how to handle certain types of incidents.</p>
<blockquote>
<div>It’s a good idea to have a <em>troubleshooting guide</em> (TSG) for each type of
alert, where an area expert details the steps to mitigate an issue.</div></blockquote>
<p>Another common issue is there is no easy mitigation. This goes back to our
<strong>coding</strong> section: code should be behind feature gates, so mitigation is as
easy as flipping a switch.</p>
<p>Yet another common issue, which we covered in the previous section when we
discussed alerts, is not having enough information to easily pinpoint the actual
issue. The on-call engineer sees an incidents, knows something is wrong, but not
enough information is available for a quick mitigation. Alerts should contain
enough information to be useful.</p>
</div>
<div class="section" id="postmortems">
<h3>Postmortems</h3>
<p>Postmortems are an invaluable tool for learning from incidents. Postmortems are
reviews of incidents once mitigated, root caused, and understood, where the
team gets together to discuss what happened and take steps to prevent the same
type of issue form happening in the future. A postmortem is not about blaming,
it is about answering the following question:</p>
<blockquote>
<div>What can we do to ensure this doesn’t happen in the future?</div></blockquote>
<p>A postmortem that doesn’t answer this question is not that useful. A good
postmortem identifies one or more work items that can be handed to engineering
to implement additional guardrails so the same issue doesn’t recur.</p>
</div>
<div class="section" id="repair-items">
<h3>Repair Items</h3>
<p>Finally, identifying repair items is not enough. A long backlog of repair items
that nobody gets around to implement won’t make things any easier.</p>
<blockquote>
<div>Engineers should treat repair items with priority.</div></blockquote>
<p>Repair items are some of the most critical work items: we’ve seen incidents in
production, we know the scope of the impact, and we know the work needed to
prevent them in the future.</p>
</div>
</div>
<div class="section" id="summary">
<h2>Summary</h2>
<p>In this post we looked at a model of software lifecycle, consisting of a
<em>proactive</em> part: engineers writing code, a signoff process to promote a build,
and signals to increase the audience for a build; and a <em>reactive part</em>: a live
site incident, which on-call engineers mitigate, the team postmortems, and
comes up with a set of repair items.</p>
<p>We also looked at some of the common issues across these various parts of the
lifecycle, and some best practices.</p>
<p>This was a very high-level overview - each of these steps has a lot of depth,
from writing safe code, to release management, to telemetry models, site
reliability engineering, and so on. All of these are critical parts of shipping
software.</p>
</div>
</div>

    <div class="postmeta">
        
        
        
        </div><ul class="related clearfix">
            <li class="left"></li>
            <li class="right"><a href="../../09/24/machine-learning-on-azure-part-3.html">Machine Learning on Azure - Part 3</a> &raquo; </li>
        </ul></article></div> <!-- #main --></div> <!-- #main-container -->

        <div class="footer-container" role="contentinfo"><div style="text-align: center; color: #93a4ad">
    By Vlad Rișcuția | <a href="http://feeds.feedburner.com/vladris">Subscribe</a> | <a href="http://vladris.com/blog/archive">Archive</a>
</div></div> <!-- footer-container -->

      </div> <!--! end of #container --><!--[if lt IE 7 ]>
          <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
          <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
        <![endif]-->
    </body>
</html>